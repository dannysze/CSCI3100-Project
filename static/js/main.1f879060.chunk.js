(this.webpackJsonpcalevents=this.webpackJsonpcalevents||[]).push([[0],{110:function(e,t,n){},112:function(e,t,n){},116:function(e,t,n){},117:function(e,t,n){},203:function(e,t,n){},204:function(e,t,n){},205:function(e,t,n){},206:function(e,t,n){},207:function(e,t,n){},208:function(e,t,n){},209:function(e,t,n){},211:function(e,t,n){},212:function(e,t,n){},213:function(e,t,n){},214:function(e,t,n){},215:function(e,t,n){},216:function(e,t,n){},217:function(e,t,n){},218:function(e,t,n){},219:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(25),s=n.n(r),i=(n(110),n(6)),o=n.n(i),l=n(12),d=n(5),u=n(26),j=n(18),b=n(252),m=n(241),p=n(242),h=n(229),O=n(226),x=n(227),f=n(228),v=n(230),g=n(221),y=n(222),N=n(223),w=n(224),k=n(225),_=(n(112),n(0)),S=function(e){var t=e.type,n=e.onClick,a=e.content;return Object(_.jsxs)("button",{className:"login-page-button login-button",type:t,onClick:n,children:[a,"\xa0",Object(_.jsx)(g.a,{})]})},C=function(e){var t=e.type,n=e.onClick,a=e.content;return Object(_.jsx)("button",{className:"login-page-button signup-button",type:t,onClick:n,children:a})},D=function(e){var t=e.onClick,n=e.style;return Object(_.jsx)("button",{onClick:t,className:"login-page-button close-button",style:n,children:Object(_.jsx)(y.a,{})})},T=function(e){var t=e.classes,n=e.clickHandler;return Object(_.jsx)("button",{className:"calendar-button ".concat(t," flex-center"),onClick:n,children:"calendar-button-reset"===t?Object(_.jsx)(N.a,{}):"calendar-button-left"===t?Object(_.jsx)(w.a,{}):Object(_.jsx)(k.a,{})})},A=function(e){var t=e.classes,n=e.clickHandler,a=e.content;return Object(_.jsx)("button",{className:"redeem-button ".concat(t),onClick:n,children:a})},E=function(e){var t=e.classes,n=e.clickHandler,a=e.content,c=e.expired,r=void 0!==c&&c;return Object(_.jsx)("button",{className:"form-button ".concat(t),onClick:n,disabled:r,type:"button",children:a})},M=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={address:"csci3100-proj.cobhjw2xjj8l.us-east-1.rds.amazonaws.com",port:3306},n=5e3;return e?"http://localhost:"+n+"/":"http://"+t.address+":"+t.port+"/"};function R(){var e=Object(a.useState)(function(){var e=localStorage.getItem("token"),t=JSON.parse(e);return null===t||void 0===t?void 0:t.token}()),t=Object(d.a)(e,2),n=t[0],c=t[1];return{setToken:function(e){localStorage.setItem("token",JSON.stringify(e)),c(e.token)},token:n}}var P=Object(a.createContext)(null),H=(n(116),function(e){var t=e.closeModal,n=e.userInfo,c=Object(a.useState)(""),r=Object(d.a)(c,2),s=r[0],i=r[1],u=Object(a.useState)(""),j=Object(d.a)(u,2),b=j[0],m=j[1],p=Object(a.useState)({errormsg:"",alert:!1}),h=Object(d.a)(p,2),O=h[0],x=h[1],f=function(e){"card_id"===e.target.name?i(e.target.value):m(e.target.value),x({errormsg:"",alert:!1})},g=function(){var e=Object(l.a)(o.a.mark((function e(t){var a,c,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),s&&b){e.next=4;break}return x({errormsg:"No fields should be left blank",alert:!0}),e.abrupt("return");case 4:return a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({card_id:s,card_pw:b,user_id:n.user_id})},e.next=7,fetch(M()+"add_value",a);case 7:return c=e.sent,e.next=10,c.json();case 10:r=e.sent;try{c.ok?x({errormsg:r.success,alert:!0}):x({errormsg:r.error,alert:!0})}catch(i){console.log(i)}case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(_.jsx)("div",{className:"add-value--background",onClick:t,children:Object(_.jsxs)("div",{className:"add-value--container",onClick:function(e){e.stopPropagation()},children:[Object(_.jsxs)("h2",{className:"flex-center",style:{justifyContent:"flex-start"},children:["Redeem gift card\xa0",Object(_.jsx)(v.a,{})]}),Object(_.jsxs)("form",{id:"redeem-form",onSubmit:g,children:[Object(_.jsx)("div",{children:Object(_.jsx)("input",{type:"text",name:"card_id",placeholder:"Card number",onChange:f})}),Object(_.jsx)("div",{children:Object(_.jsx)("input",{type:"password",name:"card_pw",placeholder:"Password",onChange:f})}),Object(_.jsx)("div",{className:"alert-box",style:O.alert?{visibility:"visible"}:{visibility:"hidden"},children:O.errormsg}),Object(_.jsx)(A,{classes:"",content:"Redeem"})]})]})})}),F=function(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=(t[0],t[1],R()),c=(n.token,n.setToken,Object(a.useContext)(P)),r=c.user,s=(c.setUser,[{title:"$".concat(Math.round(10*r.account_balance)/10),url:"#",icon:Object(_.jsx)(O.a,{}),cName:"header-items",onclick:function(){u(!0)}},{title:"".concat(r.username," "),url:"#",icon:Object(_.jsx)(x.a,{}),cName:"header-items"},{title:"Log out ",url:"#",icon:Object(_.jsx)(f.a,{}),cName:"header-items",onclick:function(){localStorage.removeItem("token"),window.location.replace("/login")}}]),i=Object(a.useState)(!1),o=Object(d.a)(i,2),l=o[0],u=o[1];return Object(_.jsxs)("div",{className:"header",children:[Object(_.jsx)("h1",{style:{left:"30px",position:"absolute"},children:"CalEvent"}),Object(_.jsx)(h.a,{in:l,timeout:500,classNames:"add-value-box-",unmountOnExit:!0,children:Object(_.jsx)(H,{closeModal:function(){u(!1)},userInfo:r})}),s.map((function(e,t){return Object(_.jsxs)("a",{href:e.url,className:"flex-center ".concat(e.cName),onClick:e.onclick,children:[e.title,e.icon]},t)}))]})},I=n(231),U=n(232),z=n(233),J=(n(117),[{title:"Home",url:"/",icon:Object(_.jsx)(I.a,{}),cName:"nav__menu-item"},{title:" My Page ",url:"/myCalendar",cName:"drop nav__menu-item"},{title:"Search",url:"/search",icon:Object(_.jsx)(U.a,{}),cName:"nav__menu-item"}]),q=[{title:"My Schedule",url:"/myCalendar",cName:"nav__submenu-items"}],B=function(){var e=Object(a.useState)(!1),t=Object(d.a)(e,2),n=t[0],c=t[1];return Object(_.jsx)("nav",{className:"nav",children:Object(_.jsx)("ul",{className:"nav__menu",children:J.map((function(e,t){return"drop nav__menu-item"===e.cName?Object(_.jsxs)("li",{className:e.cName,onMouseOver:function(){return c(!0)},onMouseLeave:function(){return c(!1)},children:[Object(_.jsxs)(u.b,{to:e.url,children:[e.title,"\xa0",Object(_.jsx)(z.a,{})]}),Object(_.jsx)(h.a,{in:n,timeout:300,classNames:"dropdown",unmountOnExit:!1,children:Object(_.jsx)("ul",{className:"nav__submenu",children:q.map((function(e,t){return Object(_.jsx)("li",{className:e.cName,children:Object(_.jsx)(u.b,{to:e.url,children:e.title})},t)}))})})]},t):Object(_.jsx)("li",{className:"".concat(e.cName),children:Object(_.jsxs)(u.b,{to:e.url,className:"flex-center",children:[e.title,"\xa0",e.icon]},t)},t)}))})})},L=n(45),$=n(64),Y=n(97),V=n(65),W=n(243),G=n(244),Z=n(98),Q=n(99),K=n(100),X=n(245),ee=n(246),te=n(247),ne=n(248),ae=n(102),ce=n(249),re=n(250),se=n(101),ie=n(257),oe=n(20),le=n(10),de=n(234),ue=n(93),je=n.n(ue),be=(n(120),function(e){var t=e.onChangeHandler,n=e.placeholder,a=e.startDate,c=e.showTime,r=void 0===c||c,s=e.minDate,i=void 0!==s&&s;return Object(_.jsx)(je.a,{selected:a,onChange:function(e){return t(e)},dateFormat:"MM/dd/yyyy  ".concat(r?"hh:mmaa":""),placeholderText:n,showTimeInput:r,minDate:i})}),me=n(235),pe=n(236),he=n(237),Oe=n(238),xe=n(239),fe=n(240),ve=(n(203),function(e,t){if(e&&t){var n=e.split("-"),a=n[0],c=(Number(n[1])-1).toString(),r=n[2],s=t.split(":");return new Date(a,c,r,s[0],s[1],s[2])}}),ge=function(e){var t=e.dismissHandler,n=e.startDate,c=e.edit,r=e.editInfo,s=Object(a.useState)(c?ve(r.start_date,r.start_time):n),i=Object(d.a)(s,2),u=i[0],j=i[1],b=Object(a.useState)(c?ve(r.end_date,r.end_time):Object(de.a)(n,1)),m=Object(d.a)(b,2),p=m[0],h=m[1],O=Object(a.useState)(c?r:{user_id:"",event_name:"",start_date:"",start_time:"",end_date:"",end_time:"",visible:0,repeat:0,venue:"",capacity:0,description:"",ticket:10,refund:1,refund_days:0,category:""}),x=Object(d.a)(O,2),f=x[0],v=x[1],g=R(),y=g.token,N=(g.setToken,Object(a.useContext)(P)),w=N.user,k=(N.setUser,Object(a.useState)(!1)),S=Object(d.a)(k,2),C=(S[0],S[1],Object(a.useState)({src:"#",value:""})),T=Object(d.a)(C,2),A=T[0],H=T[1],F=Object(a.useState)(),I=Object(d.a)(F,2),U=I[0],z=I[1],J=function(e){return e<10?"0"+e:e},q=function(e){return[J(e.getHours()),J(e.getMinutes()),J(e.getSeconds())].join(":")},B=function(e){return[e.getFullYear(),J(e.getMonth()+1),J(e.getDate())].join("-")},L=function(){var e=Object(l.a)(o.a.mark((function e(n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new FormData,console.log(U),U&&a.append("img",U),Object.keys(f).forEach((function(e){return a.append(e,f[e])})),console.log(f),e.next=7,fetch(M()+"create_event",{method:"POST",headers:{auth:y},body:a});case 7:t(),window.location.reload(!0);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(l.a)(o.a.mark((function e(n){var a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),a=new FormData,Object.keys(f).forEach((function(e){return a.append(e,f[e])})),a.append("user_id",w.user_id),e.next=6,fetch(M()+"edit_event",{method:"POST",headers:{auth:y},body:a});case 6:if(U){e.next=10;break}return t(),window.location.reload(!0),e.abrupt("return");case 10:return c=new FormData,console.log(U),c.append("img",U),c.append("event_id",f.event_id),e.next=16,fetch(M()+"event_pic",{method:"POST",headers:{auth:y},body:c});case 16:t(),window.location.reload(!0);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(e){var t,n=document.getElementById("create-event-form").elements.namedItem("free"),a=(document.getElementById("create-event-form").elements.namedItem("refund"),document.getElementById("create-event-form").elements.namedItem("ticket")),c=document.getElementById("create-event-form").elements.namedItem("refund_days");if("checkbox"!==e.target.type||e.target.checked)if("checkbox"===e.target.type&&e.target.checked){var r;if("free"===e.target.name)a.disabled=!0,a.value="",c.disabled=!0,c.value="",v(Object(le.a)(Object(le.a)({},f),{},(r={},Object(oe.a)(r,e.target.name,1),Object(oe.a)(r,"refund",0),Object(oe.a)(r,"ticket",0),Object(oe.a)(r,"refund_days",0),r)));else if("refund"===e.target.name&&!n.checked){var s;c.disabled=!1,v(Object(le.a)(Object(le.a)({},f),{},(s={},Object(oe.a)(s,e.target.name,1),Object(oe.a)(s,"refund_days",1),s)))}}else{var i;v(Object(le.a)(Object(le.a)({},f),{},(i={},Object(oe.a)(i,e.target.name,e.target.value),Object(oe.a)(i,"start_time",q(u)),Object(oe.a)(i,"start_date",B(u)),Object(oe.a)(i,"end_time",q(p)),Object(oe.a)(i,"end_date",B(p)),Object(oe.a)(i,"visible",w.type),i)))}else if("free"===e.target.name)a.disabled=!1,v(Object(le.a)(Object(le.a)({},f),{},(t={},Object(oe.a)(t,e.target.name,0),Object(oe.a)(t,"ticket",""),t)));else if("refund"===e.target.name){var o;c.disabled=!0,c.value="",v(Object(le.a)(Object(le.a)({},f),{},(o={},Object(oe.a)(o,e.target.name,0),Object(oe.a)(o,"refund_days",0),o)))}};return Object(_.jsx)("div",{className:"create-event-form--background flex-center",onClick:t,children:Object(_.jsxs)("div",{className:"create-event-form--container",onClick:function(e){return e.stopPropagation()},children:[Object(_.jsx)(D,{onClick:t,style:{fontSize:"2em",top:"10px",left:"10px"}}),Object(_.jsxs)("h1",{className:"create-event-form--title",children:[c?"edit":"create"," event"]}),Object(_.jsxs)("form",{id:"create-event-form",children:[Object(_.jsxs)("div",{className:"create-event-form--image-upload-container flex-center",children:[Object(_.jsx)("input",{type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0];if(window.FileReader){var n=new FileReader;n.onload=function(e){H(Object(le.a)(Object(le.a)({},A),{},{src:e.target.result})),document.getElementsByClassName("create-event-form--image-upload")[0].style.display="none",document.getElementsByClassName("create-event-form--image-wrapper")[0].style.display="block"},n.readAsDataURL(t),H(Object(le.a)(Object(le.a)({},A),{},{value:n}))}else alert("Your browser does not support for preview");console.log(t),z(t)}}),Object(_.jsxs)("div",{className:"create-event-form--image-upload",children:[Object(_.jsx)("h1",{children:Object(_.jsx)(me.a,{})}),Object(_.jsx)("h4",{children:"DRAG and DROP OR SELECT image"})]}),Object(_.jsxs)("div",{className:"create-event-form--image-wrapper",children:[Object(_.jsx)("img",{className:"create-event-form--uploaded-image",src:A.src,alt:"Your image"}),Object(_.jsx)("div",{className:"create-event-form--remove-imgae-button"})]})]}),Object(_.jsxs)("div",{className:"create-event-form--input-group",children:[Object(_.jsxs)("div",{className:"create-event-form--input",children:[Object(_.jsx)("span",{className:"create-event-form--input-prepend flex-center",children:Object(_.jsx)(pe.a,{})}),Object(_.jsx)("input",{type:"text",name:"event_name",placeholder:"Event",onChange:Y,value:f.event_name})]}),Object(_.jsxs)("div",{className:"create-event-form--input",children:[Object(_.jsx)("span",{className:"create-event-form--input-prepend flex-center",children:Object(_.jsx)(he.a,{})}),Object(_.jsx)("input",{type:"text",name:"venue",placeholder:"Venue",onChange:Y,value:f.venue})]})]}),Object(_.jsxs)("div",{className:"create-event-form--input-group",children:[Object(_.jsx)("div",{className:"create-event-form--input create-event-form--datepicker",children:Object(_.jsx)(be,{onChangeHandler:function(e){j(e)},startDate:u,placeholder:"Select Start Time"})}),Object(_.jsx)("div",{className:"create-event-form--input",children:Object(_.jsx)(be,{onChangeHandler:function(e){h(e)},startDate:p,placeholder:"Select End Time",minDate:u})})]}),Object(_.jsxs)("div",{className:"create-event-form--input-group create-event-form--input-grid",children:[Object(_.jsxs)("div",{className:"create-event-form--input",style:{gridRow:"1 / span 1",gridColumn:"1",paddingRight:"5px"},children:[Object(_.jsx)("span",{className:"create-event-form--input-prepend flex-center",children:Object(_.jsx)(Oe.a,{})}),Object(_.jsx)("select",{className:"",name:"category",placeholder:"",onChange:Y,children:["Sport","Music","Academic","Health","Festival","Career-related","Others"].map((function(e,t){return Object(_.jsx)("option",{value:e,children:e},t)}))})]}),Object(_.jsx)("div",{className:"create-event-form--input",style:{gridRow:"2 / span 2",gridColumn:"1",paddingRight:"5px",paddingLeft:"0px"},children:Object(_.jsx)("textarea",{className:"",name:"description",placeholder:"Description...",onChange:Y,value:f.description})}),Object(_.jsxs)("div",{className:"create-event-form--input",style:{gridRow:"1",gridColumn:"2",paddingRight:"0",paddingLeft:"5px"},children:[Object(_.jsx)("span",{className:"create-event-form--input-prepend flex-center",children:Object(_.jsx)(xe.a,{})}),Object(_.jsx)("input",{type:"number",name:"capacity",placeholder:"Capacity",onChange:Y,value:f.capacity})]}),Object(_.jsxs)("div",{className:"create-event-form--input create-event-form--checkbox",style:{gridRow:"2",gridColumn:"2",paddingRight:"0"},children:[Object(_.jsx)("span",{className:"create-event-form--input-prepend flex-center",style:{padding:"9px 8px"},children:Object(_.jsx)(fe.a,{})}),Object(_.jsx)("input",{type:"number",name:"ticket",placeholder:"Ticket",onChange:Y,min:"0",value:f.ticket,disabled:c}),Object(_.jsx)("span",{className:"create-event-form--input-append",children:Object(_.jsxs)("label",{className:"create-event-form--input-label",children:[Object(_.jsx)("input",{type:"checkbox",name:"free",onChange:Y,checked:0===f.ticket,disabled:c}),"\xa0Free"]})})]}),Object(_.jsxs)("div",{className:"create-event-form--input create-event-form--checkbox",style:{gridRow:"3",gridColumn:"2",paddingRight:"0px"},children:[Object(_.jsx)("input",{type:"number",name:"refund_days",placeholder:"Refund before",onChange:Y,style:{paddingLeft:"16px"},min:"0",disabled:c}),Object(_.jsx)("span",{className:"create-event-form--input-append",children:Object(_.jsxs)("label",{className:"create-event-form--input-label",children:[Object(_.jsx)("input",{type:"checkbox",name:"refund",onChange:Y,value:1,checked:f.refund>0,disabled:c}),"\xa0Allow refund"]})})]})]}),Object(_.jsx)("div",{className:"create-event-form--input-group",style:{paddingBottom:"20px",marginLeft:"auto"},children:Object(_.jsx)(E,{content:c?"edit":"Create",clickHandler:c?$:L})})]})]})})},ye=n(2),Ne=n.n(ye),we=(n(204),n(258));n(205);var ke=function(e){var t=e.height,n=e.events,c=e.title,r=Object(a.useState)({toggle:!1,event:{}}),s=Object(d.a)(r,2),i=s[0],o=s[1];return Object(_.jsxs)("div",{className:"Events",children:[Object(_.jsxs)("div",{className:"outer",style:{width:"100%"},children:[Object(_.jsx)("h1",{children:c}),Object(_.jsx)("div",{className:"events",style:{height:"".concat(t-61,"px")},children:n.map((function(e,t){return Object(_.jsx)(Se,{event:e,onClick:function(){return o({toggle:!0,event:e})}},t)}))})]}),Object(_.jsx)(_e,{showEvent:i,setShow:o})]})},_e=function(e){var t=e.showEvent,n=e.setShow,c=Object(a.useContext)(P),r=c.user,s=(c.setUser,R()),i=s.token,u=(s.setToken,Object(a.useState)(0)),j=Object(d.a)(u,2),b=(j[0],j[1],function(e){var n=t.event;if(e.start_time>=n.start_time&&e.start_time<=n.end_time&&e.start_date>=n.start_date&&e.start_date<=n.end_date||e.end_time>=n.start_time&&e.end_time<=n.end_time&&e.end_date>=n.start_date&&e.end_date<=n.end_date)return!0}),h=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(M()+"joined_events/"+r.user_id);case 2:return e.next=4,e.sent.json();case 4:return t=e.sent,n=t.filter((function(e){return b(e)})),console.log(n),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(l.a)(o.a.mark((function e(){var n,a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h();case 3:return n=e.sent,e.next=6,fetch(M()+"join_event",{method:"POST",headers:{auth:i,"Content-Type":"application/json"},body:JSON.stringify({user_id:r.user_id,event_id:t.event.event_id})});case 6:return a=e.sent,e.next=9,a.json();case 9:c=e.sent,a.ok?n.length>0?alert("You has successfully joined the event but please note that the event coincides in time with some of the joined events.\nYou can check in schedule."):alert("You has successfully joined the event."):alert(c.error),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return Object(_.jsx)(_.Fragment,{children:Object(_.jsxs)(ie.a,{show:t.toggle,onHide:function(){return n({toggle:!1,event:{}})},dialogClassName:"custom-modal","aria-labelledby":"example-custom-modal-styling-title",children:[Object(_.jsx)(ie.a.Header,{className:"pop-up-bar",closeButton:!0,children:Object(_.jsx)("h1",{children:"E v e n t"})}),Object(_.jsxs)(ie.a.Body,{children:[Object(_.jsxs)(m.a,{className:"row-container",children:[Object(_.jsx)(p.a,{className:"pop-img-container",sm:4,children:Object(_.jsx)("img",{src:t.event.img_loc,alt:"event-photo"})}),Object(_.jsxs)(p.a,{className:"pop-info-container",sm:7,children:[Object(_.jsx)("div",{className:"pop-up-title",children:t.event.name}),Object(_.jsxs)(we.a,{variant:"flush",children:[Object(_.jsxs)(we.a.Item,{className:"pop-info",children:["Organizer: ",t.event.username||t.event.organizer]}),Object(_.jsxs)(we.a.Item,{className:"pop-info",children:["Date: ",t.event.start_date===t.event.end_date?"".concat(t.event.start_date):"".concat(t.event.start_date)+"  to  "+"".concat(t.event.end_date)]}),Object(_.jsxs)(we.a.Item,{className:"pop-info",children:["Time: ",t.event.start_time,"\xa0-\xa0",t.event.end_time]}),Object(_.jsxs)(we.a.Item,{className:"pop-info",children:["Venue: ",t.event.venue]}),Object(_.jsxs)(we.a.Item,{className:"pop-info",children:["Maximum Number of Participant: ",null===t.event.capacity?"Unlimited":"".concat(t.event.capacity)]}),Object(_.jsxs)(we.a.Item,{className:"pop-info",children:["Fee: ",0===t.event.ticket?"Free":"".concat(t.event.ticket)]}),Object(_.jsxs)(we.a.Item,{className:"pop-info",children:["Days for refund: ",null===t.event.days_for_refund?"Not Allow":"".concat(t.event.days_for_refund)]})]})]})]}),Object(_.jsx)(m.a,{children:Object(_.jsx)(p.a,{children:Object(_.jsx)("div",{className:"pop-description-head",children:"Description"})})}),Object(_.jsx)(m.a,{children:Object(_.jsx)(p.a,{sm:12,children:Object(_.jsx)("div",{className:"pop-description","data-spy":"scroll",children:t.event.description})})}),Object(_.jsxs)(m.a,{children:[Object(_.jsx)(p.a,{sm:8}),Object(_.jsx)(p.a,{sm:1,children:function(e,t){if(e&&t){var n=e.split("-"),a=n[0],c=(Number(n[1])-1).toString(),r=n[2],s=t.split(":");return new Date(a,c,r,s[0],s[1],s[2])}}(t.event.start_date,t.event.start_time)>=new Date&&0===r.type&&Object(_.jsx)(E,{content:"Join",clickHandler:O})}),Object(_.jsx)(p.a,{sm:3,children:Object(_.jsx)(E,{className:"pop-button-organizer",content:"Contact Organizer"})})]})]})]})})},Se=function(e){var t=e.event,n=e.onClick;return Object(_.jsxs)("div",{className:"card-container",children:[Object(_.jsx)("div",{className:"image-container",children:Object(_.jsx)("img",{src:t.img_loc,alt:"event photo"})}),Object(_.jsx)("h3",{className:"title",children:t.name}),Object(_.jsxs)("div",{className:"info-container",children:[Object(_.jsxs)("div",{className:"organizer",children:["Organizerd by ",Object(_.jsx)("b",{children:t.username})]}),Object(_.jsxs)("div",{className:"datetime",children:["Time:\xa0",t.start_time.substring(0,5),"\xa0-\xa0",t.end_time.substring(0,5)]}),Object(_.jsxs)("div",{className:"venue",children:["Date: ",t.start_date===t.end_date?"".concat(t.start_date):"".concat(t.start_date)+"  to  "+"".concat(t.end_date)]}),Object(_.jsxs)("div",{className:"venue",children:["Venue:\xa0",t.venue]}),Object(_.jsx)("h3",{className:"description-head",children:"Description:"}),Object(_.jsx)("p",{className:"description-body",children:t.description})]}),Object(_.jsx)("div",{className:"card-btn",children:Object(_.jsx)("button",{className:"flex-center",onClick:n,children:"More"})})]})};Event.propTypes={event:Ne.a.object.isRequired,onClick:Ne.a.func.isRequired};n(206);var Ce=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],De=["January","Feburay","March","April","May","June","July","August","September","October","November","December"],Te=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=[],n=Object($.a)(Object(Y.a)(Object(V.a)(e))),a=Object(W.a)(Object(G.a)(Object(V.a)(e))),c=n,r={};c<a;)r={day:c,disabled:!1,today:!1,sunday:!1,hide:0},(c<Object(Y.a)(Object(V.a)(e))||c>Object(G.a)(Object(V.a)(e)))&&(r.disabled=!0),0===Object(Z.a)(c)&&(r.sunday=!0),0==Object(Q.a)(c,new Date)&&(r.today=!0),t.push(r),c=Object(K.a)(c,1);return t},Ae=function(e,t){var n=e.split("-"),a=n[0],c=(Number(n[1])-1).toString(),r=n[2],s=t.split(":");return new Date(a,c,r,s[0],s[1],s[2])},Ee=function(e){var t=e.month,n=e.year,a=e.previousMonth,c=e.nextMonth;return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)("h1",{className:"flex-center",children:[Object(_.jsx)(T,{classes:"calendar-button-left",clickHandler:a}),Object(_.jsx)("span",{style:{width:"100px",textAlign:"center"},children:t}),Object(_.jsx)(T,{classes:"calendar-button-right",clickHandler:c})]}),Object(_.jsx)("p",{children:n})]})},Me=function(e){return Object(_.jsx)("div",{className:"day ".concat(e.disabled?"day--disabled":""),style:e.sunday?{color:"rgba(217, 83, 79, ".concat(e.disabled?.6:1,")")}:{},onDoubleClick:function(){return e.doubleClickHandler(e.name)},onMouseOver:function(t){var n=setTimeout((function(){e.clickHandler(e.name)}),1e3);t.target.addEventListener("mouseleave",(function(){clearTimeout(n)}))},children:Object(_.jsx)("span",{className:e.today?"calendar--today":"",children:Object(se.a)(e.name)})})},Re=function(e){var t=e.classes,n=e.name,a=e.styles;return Object(_.jsx)("section",{className:"task ".concat(t),style:a,children:n})},Pe=function(e){var t=e.styles,n=e.hide;return Object(_.jsx)("section",{className:"tag",style:t,children:"".concat(n," more")})},He=function(e){var t=e.heightHandler,n=Object(a.useContext)(P),c=n.user,r=(n.setUser,R()),s=(r.token,r.setToken,Object(V.a)(new Date)),i={calendarStart:Object(Y.a)(s),calendarArr:Te(s)},u=Object(a.useState)(i),j=Object(d.a)(u,2),b=j[0],m=j[1],p=Object(a.useState)([]),O=Object(d.a)(p,2),x=O[0],f=O[1],v=Object(a.useState)({show:!1,startDate:new Date}),g=Object(d.a)(v,2),y=g[0],N=g[1],w=Object(a.useState)({toggle:!1,events:[]}),k=Object(d.a)(w,2),S=k[0],C=k[1];Object(a.useEffect)((function(){t(),function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D();case 2:t=e.sent,f(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[b],[x]);var D=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(M()+"search_events",{headers:{"Content-Type":"application/json",Accept:"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T={},A=function(e){N({show:!0,startDate:e})},E=function(e){T[e]?C({toggle:!0,events:T[e].events}):C({toggle:!0,events:[]})},H=Object(a.useState)({toggle:!1,event:{}}),F=Object(d.a)(H,2),I=F[0],U=F[1];return Object(_.jsxs)("div",{className:"calendar-container",children:[Object(_.jsx)(h.a,{in:y.show,timeout:300,classNames:"create-event-form-",unmountOnExit:!0,children:Object(_.jsx)(ge,{dismissHandler:function(){return N({show:!1,startDate:y.startDate})},startDate:y.startDate,edit:!1})}),Object(_.jsx)("div",{className:"calendar-header",children:Object(_.jsx)(Ee,{month:De[Object(ce.a)(b.calendarStart)],year:Object(re.a)(b.calendarStart),previousMonth:function(){var e=Object(ne.a)(b.calendarStart,1);m({calendarStart:e,calendarArr:Te(e)})},nextMonth:function(){var e=Object(ae.a)(b.calendarStart,1);m({calendarStart:e,calendarArr:Te(e)})}})}),Object(_.jsxs)("div",{className:"calendar",children:[Ce.map((function(e,t){return Object(_.jsx)("span",{className:"day-name",style:"Sun"===e?{color:"rgb(217, 83, 79)"}:{},children:e},t)})),b.calendarArr.map((function(e,t){return Object(_.jsx)(Me,{disabled:e.disabled,name:e.day,today:e.today,sunday:e.sunday,doubleClickHandler:1==c.type?A:function(){},clickHandler:E},t)})),(T={},x.map((function(e){var t=Ae(e.start_date,e.start_time),n=Ae(e.end_date,e.end_time);if(!(n<b.calendarArr[0].day||t>b.calendarArr[b.calendarArr.length-1].day)){t<b.calendarArr[0].day&&(t=b.calendarArr[0].day),n>b.calendarArr[b.calendarArr.length-1].day&&(n=b.calendarArr[b.calendarArr.length-1].day);var a,c=Object(V.a)(t),r=Object(V.a)(n),s=Object(X.a)(c)+1,i=Object(Z.a)(c)+1,o=Object(ee.a)(r,c)+1,l=Object(te.a)(r,c);t<b.calendarStart&&(s=2),t>Object(G.a)(b.calendarStart)&&(s=Object(X.a)(Object(G.a)(b.calendarStart))+1),a=l>0?Object(L.a)(Array(l+1)).map((function(e,t){return 0==t?(o-=7-i+1,7-i+1):t==l?o:(o-=7,7)})):[o];for(var d={center:!0,end:!0},u=c;u<=r;u=Object(K.a)(u,1))T[u]?(T[u].frequency++,d.center=d.center&&T[u].center,d.end=d.end&&T[u].end):T[u]={center:!0,end:!0,frequency:1,hide:0,row:s+Object(te.a)(u,c),column:Object(Z.a)(u)+1,events:[]},T[u].events.push(e);var j="block";if(d.center)for(var m=c;m<=r;m=Object(K.a)(m,1))T[m].center=!1;else if(d.end)for(var p=c;p<=r;p=Object(K.a)(p,1))T[p].end=!1;else j="none",T[c].hide++;var h=d.center?"center":d.end?"end":"";return a.map((function(t,n){var a={gridColumn:"".concat(0==n?i:1," / span ").concat(t),gridRow:"".concat(s+n),alignSelf:"".concat(h),display:j};return Object(_.jsx)(Re,{classes:"task--".concat(null===e.category?"":e.category.split(" ")[0]),styles:a,name:e.name},n)}))}}))),function(){var e=[];for(var t in T)if(0!==T[t].hide){var n={gridColumn:"".concat(T[t].column),gridRow:"".concat(T[t].row),alignSelf:"start"};e.push(Object(_.jsx)(Pe,{styles:n,hide:T[t].hide},t))}return e}()]}),Object(_.jsxs)("div",{className:"flex-center",style:{justifyContent:"space-between",fontSize:".8em"},children:[["Sport","Music","Academic","Health","Festival","Career-related","Whole-person development","Others"].map((function(e,t){return Object(_.jsxs)("div",{className:"calendar-labels",children:[Object(_.jsx)("span",{className:"task--".concat(e," dot")})," ",e]})})),Object(_.jsxs)("div",{classNames:"calendar-tips",children:["*",Object(_.jsx)("b",{children:"Hover"})," to check events of the day. ",Object(_.jsx)("b",{children:"Double Click"}),"  to create public event (Only for organizer)."]})]}),Object(_.jsxs)(ie.a,{show:S.toggle,onHide:function(){return C({toggle:!1,events:[]})},dialogClassName:"calendar-event-modal",children:[Object(_.jsx)(ie.a.Header,{closeButton:!0,className:"calendar-event-modal-title",children:"More Events..."}),Object(_.jsx)(ie.a.Body,{children:Object(_.jsx)("div",{className:"calendar-event-list-modal-container",children:0!=S.events.length?S.events.map((function(e,t){return Object(_.jsx)(Se,{event:e,onClick:function(){return t=e,C({toggle:!1,events:[]}),void U({toggle:!0,event:t});var t}},t)})):Object(_.jsx)("h1",{children:"There is no more events on this day"})})})]}),Object(_.jsx)(_e,{showEvent:I,setShow:U})]})},Fe=(n(207),function(e){var t=e.height,n=Object(a.useState)([]),c=Object(d.a)(n,2),r=c[0],s=c[1],i=function(e,t){var n=e.split("-"),a=n[0],c=(Number(n[1])-1).toString(),r=n[2],s=t.split(":");return new Date(a,c,r,s[0],s[1],s[2])};Object(a.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:t=e.sent,n=t.filter((function(e){if(i(e.start_date,e.start_time)>=new Date)return e})),s(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var u=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(M()+"search_events",{headers:{"Content-Type":"application/json",Accept:"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(_.jsx)("div",{className:"upcoming-events",style:{width:"100%",maxHeight:"".concat(t,"px")},children:Object(_.jsx)(ke,{height:t,events:r,title:"Upcoming"})})}),Ie=n(251),Ue=(n(208),function(){return Object(_.jsxs)("div",{className:"footer",children:[Object(_.jsx)("h1",{children:"C a l E v e n t"}),Object(_.jsx)("p",{children:"Copyright \xa9 All right reserved by CSCI 3100 Group E1 2021 "}),Object(_.jsx)("a",{href:"https://github.com/dannysze/CSCI3100-Project",target:"_blank",children:Object(_.jsx)(Ie.a,{})})]})}),ze=(n(209),function(){var e=Object(a.useState)(796),t=Object(d.a)(e,2),n=t[0],c=t[1];Object(a.useEffect)((function(){document.title="Home Page"}));return Object(_.jsxs)(b.a,{className:"home",fluid:!0,children:[Object(_.jsx)(F,{}),Object(_.jsx)(B,{}),Object(_.jsxs)(m.a,{className:"main-content",children:[Object(_.jsx)(p.a,{md:9,children:Object(_.jsx)(He,{heightHandler:function(){var e=document.getElementsByClassName("calendar-container")[0].clientHeight;c(e)}})}),Object(_.jsx)(p.a,{md:3,children:Object(_.jsx)(Fe,{height:n})})]}),Object(_.jsx)(Ue,{})]})}),Je=(n(210),n(211),function(){var e=R(),t=(e.token,e.setToken);Object(a.useEffect)((function(){document.title=A?"Login":"Sign Up"}));var n={username:!0,password:!0,password_double:!0,email:!0},c={errorMsg:"",alert:!1},r=Object(a.useState)(""),s=Object(d.a)(r,2),i=s[0],u=s[1],j=Object(a.useState)(""),b=Object(d.a)(j,2),m=b[0],p=b[1],O=Object(a.useState)(""),x=Object(d.a)(O,2),f=x[0],v=x[1],g=Object(a.useState)(""),y=Object(d.a)(g,2),N=y[0],w=y[1],k=Object(a.useState)(!0),T=Object(d.a)(k,2),A=T[0],E=T[1],P=Object(a.useState)(n),H=Object(d.a)(P,2),F=H[0],I=H[1],U=Object(a.useState)(!1),z=Object(d.a)(U,2),J=z[0],q=z[1],B=Object(a.useState)(c),L=Object(d.a)(B,2),$=L[0],Y=L[1],V=Object(a.useState)(c),W=Object(d.a)(V,2),G=W[0],Z=W[1],Q=Object(a.useState)(c),K=Object(d.a)(Q,2),X=K[0],ee=K[1],te=function(e){"username"===e.target.name?u(e.target.value):p(e.target.value),Y(c)},ne=function(e){if(Z(c),"username_register"===e.target.name)u(e.target.value);else if("password_register"===e.target.name)p(e.target.value),m===e.target.value?I(Object(le.a)(Object(le.a)({},n),{},{password_double:!0})):I(Object(le.a)(Object(le.a)({},n),{},{password_double:!1}));else if("password_register_check"===e.target.name)m===e.target.value?I(Object(le.a)(Object(le.a)({},n),{},{password_double:!0})):I(Object(le.a)(Object(le.a)({},n),{},{password_double:!1}));else if("email_register"===e.target.name){/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(f)?I(Object(le.a)(Object(le.a)({},n),{},{email:!0})):I(Object(le.a)(Object(le.a)({},n),{},{email:!1})),v(e.target.value)}else"type"===e.target.name&&w(e.target.value)},ae=function(e){e.preventDefault(),oe(),q(!J)},ce=function(){var e=Object(l.a)(o.a.mark((function e(n){var a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),i&&m){e.next=4;break}return Y({errorMsg:"Neither username nor password should be left empty",alert:!0}),e.abrupt("return");case 4:return e.prev=4,e.next=7,fetch(M()+"login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:i,password:m})});case 7:return a=e.sent,e.next=10,a.json();case 10:c=e.sent,a.ok?(t({token:c.token}),window.location.replace("/")):Y({errorMsg:c.error,alert:!0}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=Object(l.a)(o.a.mark((function e(n){var a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),i&&m&&f){e.next=4;break}return Z({errorMsg:"No fields should be left empty",alert:!0}),e.abrupt("return");case 4:if(N){e.next=7;break}return Z({errorMsg:"Please select user type",alert:!0}),e.abrupt("return");case 7:if(F.username&&F.password&&F.email){e.next=9;break}return e.abrupt("return");case 9:return e.prev=9,e.next=12,fetch(M()+"signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:i,password:m,email:f,type:"user"==N?0:1})});case 12:return a=e.sent,e.next=15,a.json();case 15:c=e.sent,a.ok?(t({token:c.token}),window.location.replace("/")):Z({errorMsg:c.error,alert:!0}),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(9),console.log(e.t0);case 22:case"end":return e.stop()}}),e,null,[[9,19]])})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),f){e.next=4;break}return ee({errorMsg:"Email should not be left empty",alert:!0}),e.abrupt("return");case 4:if(F.email){e.next=6;break}return e.abrupt("return");case 6:return e.prev=6,e.next=9,fetch(M()+"reset_password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:f})});case 9:return n=e.sent,e.next=12,n.json();case 12:a=e.sent,n.ok?ee({errorMsg:"Password reset link has been sent to your mailbox. Reset your password there.",alert:!0}):ee({errorMsg:a.error,alert:!0}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(6),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[6,16]])})));return function(t){return e.apply(this,arguments)}}(),ie=document.getElementsByTagName("form"),oe=function(){u(""),p("");for(var e=0;e<ie.length;e++)ie[e].reset();u(""),p(""),v(""),w(""),I(n)},de=[{name:"username_register",placeholder:"Username",type:"text",errorMsg:"The username has been used",alert:F.username},{name:"email_register",placeholder:"Email Address",type:"text",errorMsg:"Not valid email address",alert:F.email},{name:"password_register",placeholder:"Password",type:"password",errorMsg:"&nbsp;",alert:F.password},{name:"password_register_check",placeholder:"Enter Password Again",type:"password",errorMsg:"Password is not matched",alert:F.password_double}],ue=function(){oe(),q(!1),E(!A),Y(c),Z(c),ee(c)};return Object(_.jsx)(h.a,{in:!0,timeout:300,classNames:"login-page",unmountOnExit:!0,children:Object(_.jsx)("div",{className:"login flex-center",children:Object(_.jsxs)("div",{className:"login-form-container",children:[Object(_.jsx)(h.a,{in:!A,timeout:700,classNames:"login-overlay",unmountOnExit:!1,children:Object(_.jsxs)("div",{className:"login-overlay flex-center",children:[Object(_.jsxs)("div",{className:"login-show flex-center",children:[Object(_.jsx)("h1",{children:"Join Us!"}),Object(_.jsx)("h6",{children:"CalEvents can help you manage your schedules well!"}),Object(_.jsx)(C,{type:"",onClick:ue,content:"Sign Up"})]}),Object(_.jsxs)("div",{className:"signup-show flex-center",children:[Object(_.jsx)("h1",{children:"Already have an account?"}),Object(_.jsx)("h6",{}),Object(_.jsx)(C,{type:"",onClick:ue,content:"Sign in"})]})]})}),Object(_.jsxs)("div",{className:"signup-form",children:[Object(_.jsx)("h2",{children:"Sign Up"}),Object(_.jsxs)("form",{action:"auth",nethod:"POST",children:[de.map((function(e,t){return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("input",{type:e.type,name:e.name,placeholder:e.placeholder,onChange:ne,required:!0},t),Object(_.jsx)("div",{className:"alert-box",style:e.alert?{visibility:"hidden"}:{visibility:"visible"},children:e.errorMsg})]})})),Object(_.jsx)("div",{className:"alert-box",style:G.alert?{visibility:"visible"}:{visibility:"hidden"},children:G.errorMsg}),Object(_.jsxs)("div",{className:"note",children:["Note",Object(_.jsx)("span",{style:{color:"red"},children:" * "}),": Users cannot create public events. Organisers cannot join events"]}),Object(_.jsxs)("div",{className:"radio-group",children:[Object(_.jsxs)("label",{className:"radio-container",children:[Object(_.jsx)("input",{type:"radio",name:"type",value:"user",onChange:ne}),"User",Object(_.jsx)("span",{className:"checkmark"})]}),Object(_.jsxs)("label",{className:"radio-container",children:[Object(_.jsx)("input",{type:"radio",name:"type",value:"organiser",onChange:ne}),"Organiser",Object(_.jsx)("span",{className:"checkmark"})]})]}),Object(_.jsx)("br",{}),Object(_.jsx)(S,{type:"submit",onClick:re,content:"Sign up"})]})]}),Object(_.jsx)(h.a,{in:!J,timeout:350,classNames:"reset-login-form",children:Object(_.jsxs)("div",{className:"login-form",children:[Object(_.jsx)("h2",{children:"Login!"}),Object(_.jsx)("h1",{style:{padding:"20px 0"},children:"CalEvents"}),Object(_.jsxs)("form",{action:"auth",method:"POST",children:[[{name:"username",placeholder:"Username",type:"text"},{name:"password",placeholder:"Password",type:"password"}].map((function(e,t){return Object(_.jsx)("input",{type:e.type,name:e.name,placeholder:e.placeholder,onChange:te,required:!0},t)})),Object(_.jsx)("div",{className:"alert-box",style:$.alert?{visibility:"visible"}:{visibility:"hidden"},children:$.errorMsg}),Object(_.jsx)("br",{}),Object(_.jsx)("br",{}),Object(_.jsx)("a",{onClick:ae,className:"reset-password",children:"Forget Password?"}),Object(_.jsx)("br",{}),Object(_.jsx)("br",{}),Object(_.jsx)(S,{type:"submit",onClick:ce,content:"Sign In"})]})]})}),Object(_.jsx)(h.a,{in:J,timeout:800,classNames:"reset-form",children:Object(_.jsxs)("div",{className:"reset-form",children:[Object(_.jsx)(D,{onClick:ae,style:{marginLeft:"10%",marginTop:"-20%"}}),Object(_.jsx)("h2",{children:"Reset Password"}),Object(_.jsxs)("form",{action:"auth",method:"POST",children:[Object(_.jsx)("input",{type:"text",name:"email",placeholder:"Enter your email",onChange:function(e){e.preventDefault(),ee(c);/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(f)?I(Object(le.a)(Object(le.a)({},n),{},{email:!0})):I(Object(le.a)(Object(le.a)({},n),{},{email:!1})),v(e.target.value)}}),Object(_.jsx)("div",{className:"alert-box",style:F.email?{visibility:"hidden"}:{visibility:"visible"},children:"Not valid email address"}),Object(_.jsx)("div",{className:"alert-box",style:X.alert?{visibility:"visible"}:{visibility:"hidden"},children:X.errorMsg}),Object(_.jsx)("br",{}),Object(_.jsx)("br",{}),Object(_.jsx)(S,{type:"submit",onClick:se,content:"Reset password"})]})]})})]})})})}),qe=n(259),Be=n(253),Le=n(254),$e=n(255),Ye=n(103),Ve=n(256),We=(n(212),["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]),Ge=["January","Feburay","March","April","May","June","July","August","September","October","November","December"],Ze=Object(L.a)(Array(48).keys()),Qe=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=[],n=Object($.a)(Object(V.a)(e)),a=Object(W.a)(Object(V.a)(e)),c={},r=n;r<a;)c={day:r,disabled:!1,today:!1,sunday:!1,frequency:0},r<Object(V.a)(new Date)&&(c.disabled=!0),0===Object(Z.a)(r)&&(c.sunday=!0),0==Object(Q.a)(r,new Date)&&(c.today=!0),t.push(c),r=Object(K.a)(r,1);return t},Ke=function(e,t){var n=e.split("-"),a=n[0],c=(Number(n[1])-1).toString(),r=n[2],s=t.split(":");return new Date(a,c,r,s[0],s[1],s[2])},Xe=function(){var e=Object(V.a)(new Date),t={weekStart:Object($.a)(e),scheduleArr:Qe(e)},n=Object(a.useState)(t),c=Object(d.a)(n,2),r=c[0],s=c[1],i=Object(a.useState)({show:!1,startDateTime:new Date}),u=Object(d.a)(i,2),j=u[0],b=u[1],m=Object(a.useState)([]),p=Object(d.a)(m,2),O=p[0],x=p[1],f=(R().token,Object(a.useContext)(P)),v=f.user;f.setUser;Object(a.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:t=e.sent,x(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[r,v]);var g=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(M()+"joined_events/"+v.user_id,{headers:{"Content-Type":"application/json",Accept:"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(_.jsxs)("div",{className:"schedule-container",children:[Object(_.jsx)(h.a,{in:j.show,timeout:300,classNames:"create-event-form-",unmountOnExit:!0,children:Object(_.jsx)(ge,{dismissHandler:function(){return b({show:!1,startDateTime:j.startDateTime})},startDate:j.startDateTime})}),Object(_.jsxs)("div",{className:"schedule-header",children:[Object(_.jsxs)("div",{className:"timeslots timeslots-button",children:[Object(_.jsx)("span",{id:"schedule--month",children:Ge[Object(ce.a)(r.weekStart)]}),Object(_.jsx)(T,{classes:"calendar-button-left",clickHandler:function(){var e=Object($e.a)(r.weekStart,1);s({weekStart:e,scheduleArr:Qe(e)})}}),Object(_.jsx)(T,{classes:"calendar-button-reset",clickHandler:function(){s(t)}}),Object(_.jsx)(T,{classes:"calendar-button-right",clickHandler:function(){var e=Object(Ye.a)(r.weekStart,1);s({weekStart:e,scheduleArr:Qe(e)})}})]}),r.scheduleArr.map((function(e,t){var n={gridColumn:"".concat(t+2),color:"".concat(e.sunday?"rgba(217, 83, 79, ".concat(e.disabled?.6:1,")"):e.disabled?"rgba(152, 160, 166, 0.6)":"#282828"),fontWeight:"".concat(e.today?"600":"400")};return Object(_.jsxs)("span",{className:"schedule-day-name",style:n,children:[Object(_.jsx)("span",{className:"schedule-header--number",children:Object(se.a)(e.day)}),"\xa0\xa0",We[t]]},t)}))]}),Object(_.jsxs)("div",{className:"schedule-week",children:[Object(_.jsx)("div",{className:"timeslots all-day-events--title",children:"All-day"}),Object(_.jsxs)("div",{className:"all-day-events--grid",children:[r.scheduleArr.map((function(e,t){return Object(_.jsx)("div",{className:"all-day-events--slots ".concat(e.today?"block--today":"")},t)})),function(){var e=r.scheduleArr.slice(0,7).map((function(e,t){return e.frequency=0,e}));return O.map((function(t,n){var a=Object(V.a)(Ke(t.start_date,t.start_time)),c=Object(V.a)(Ke(t.end_date,t.end_time));if(0!==Object(Q.a)(c,a)&&!(c<r.weekStart||a>r.scheduleArr[r.scheduleArr.length-1].day)){a<r.weekStart&&(a=r.weekStart),c>r.scheduleArr[r.scheduleArr.length-1].day&&(c=r.scheduleArr[r.scheduleArr.length-1].day);for(var s=Object(Z.a)(a)+1,i=Object(Q.a)(c,a)+1,o=1,l=!1,d=0;d<e.length&&(!l||(e[d].frequency++,o=Math.max(o,e[d].frequency),0!==Object(Q.a)(e[d].day,c)));d++)0===Object(Q.a)(e[d].day,a)&&(l=!0,e[d].frequency++,o=e[d].frequency);var u=o,j={gridColumn:"".concat(s," / span ").concat(i),gridRow:"".concat(u)};return Object(_.jsx)("section",{className:"task task--".concat(t.category.split(" ")[0]," all-day-events--bar"),style:j,children:t.name})}}))}()]})]}),Object(_.jsxs)("div",{className:"schedule-body",children:[Ze.map((function(e,t){return t%2==0&&0!=t?Object(_.jsx)("div",{className:"timeslots",children:"".concat(e/2%12==0?12:e/2%12," ").concat(e/2<12?"am":"pm")},t):Object(_.jsx)("div",{className:"timeslots"},t)})),r.scheduleArr.map((function(e,t){return Ze.map((function(n,a){var c={gridRow:a+1,gridColumn:t+2};return Object(_.jsx)("div",{style:c,className:"block ".concat(e.today?"block--today":""),onClick:function(){return t=Object(Ve.a)(e.day,30*a),void b({show:!0,startDateTime:t});var t},children:"\xa0"},t*a+a)}))})),({},O.filter((function(e){var t=Ke(e.start_date,e.start_time),n=Ke(e.end_date,e.end_time);if(Object(Q.a)(n,t)>0);else if(!(t>r.scheduleArr[r.scheduleArr.length-1].day||n<r.weekStart))return e})).map((function(e,t){var n,a,c=Ke(e.start_date,e.start_time),r=Ke(e.end_date,e.end_time),s=Object(Z.a)(c)+2,i=Object(qe.a)(r,c),o=Object(Be.a)(c),l=Object(Le.a)(c),d=Object(Be.a)(r),u=Object(Le.a)(r);n=o<=30&&o>0?2*l+2:0==o?2*l+1:2*o+2,a=Math.floor(i/30);var j={gridColumn:"".concat(s),gridRow:"".concat(n," / span ").concat(a)};return Object(_.jsxs)("section",{className:"block--events task task--".concat(e.category.split(" ")[0]),style:j,children:[Object(_.jsx)("div",{className:"block--events-title",children:e.name}),Object(_.jsx)("div",{className:"",children:"".concat(l,":").concat(("0"+o).slice(-2)," - ").concat(u,":").concat(("0"+d).slice(-2))})]})})))]}),Object(_.jsxs)("div",{style:{textAlign:"right",fontWeight:"350",fontStyle:"oblique"},children:["*",Object(_.jsx)("b",{children:"Click"})," to create event (Private for normal user/Public for organizer)."]})]})},et=(n(213),function(e){var t=e.event,n=(e.onClick,e.index),c=Object(a.useState)(!1),r=Object(d.a)(c,2),s=r[0],i=r[1],u=Object(a.useState)(""),j=Object(d.a)(u,2),b=j[0],m=j[1],p=Object(a.useState)(!1),O=Object(d.a)(p,2);O[0],O[1];Object(a.useEffect)((function(){console.log(k.type),console.log(t.visible),m(document.getElementsByClassName("record-info")[n].scrollHeight)}),[]);var x=Object(a.useState)({show:!1,start_date:t.start_date,end_date:t.end_date}),f=Object(d.a)(x,2),v=f[0],g=f[1],y={show:!0,start_time:t.start_time,start_date:t.start_date,end_time:t.end_time,end_date:t.end_date,event_name:t.name,event_id:t.event_id,venue:t.venue,capacity:t.capacity,ticket:t.ticket,description:t.description},N=R().token,w=Object(a.useContext)(P),k=w.user,S=(w.setUser,function(){var e=Object(l.a)(o.a.mark((function e(){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=window.confirm("Are you sure to delete this event?")){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,fetch(M()+"user_events/"+t.event_id,{method:"Delete",headers:{auth:N}});case 5:return n=e.sent,e.next=8,n.json();case 8:a=e.sent,n.ok?alert(a.success):alert(a.error),window.location.reload();case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),C=function(){var e=Object(l.a)(o.a.mark((function e(n){var a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),0!=window.confirm("You sure you want to quit?")){e.next=4;break}return e.abrupt("return");case 4:return console.log(k.user_id),e.next=7,fetch("".concat(M(),"refund/").concat(t.event_id),{method:"POST",headers:{auth:N,"Content-Type":"application/json"},body:JSON.stringify({user_id:k.user_id})});case 7:return a=e.sent,e.next=10,a.json();case 10:c=e.sent,a.ok?alert(c.success):alert(c.error);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(_.jsxs)("li",{className:"record-container",children:[Object(_.jsx)(h.a,{in:v.show,timeout:300,classNames:"create-event-form-",unmountOnExit:!0,children:Object(_.jsx)(ge,{dismissHandler:function(){return g({show:!1,start_date:v.start_date})},startDate:v.start_date,edit:!0,editInfo:v})}),Object(_.jsxs)("div",{className:"record-title",onClick:function(){i(!s)},children:[Object(_.jsx)("span",{className:"record",style:s?{whiteSpace:"normal"}:{},children:t.name}),Object(_.jsx)("span",{style:s?{transform:"rotate(180deg)"}:{transform:"rotate(0deg)"},className:"record-title-icon",children:Object(_.jsx)(z.a,{})})]}),Object(_.jsxs)("div",{className:"record-info",style:s?{height:"".concat(b,"px"),marginTop:"10px"}:{height:"0px"},children:[Object(_.jsxs)("div",{className:"organizer",children:[Object(_.jsx)("em",{children:"Organizer:"}),"\xa0",t.organizer]}),Object(_.jsxs)("div",{className:"venue",children:[Object(_.jsx)("em",{children:"Venue:"}),"\xa0",t.venue]}),Object(_.jsxs)("div",{className:"date",children:[t.start_date===t.end_date?"".concat(t.start_date):"".concat(t.start_date)+" to "+"".concat(t.end_date),Object(_.jsxs)("span",{className:"time",children:[t.start_time.substring(0,5)," - ",t.end_time.substring(0,5)]})]}),Object(_.jsx)("hr",{style:{margin:".5em"}}),Object(_.jsx)("div",{className:"re-description-head",children:"Description:"}),Object(_.jsx)("div",{className:"description",children:t.description?t.description:"No description"}),Object(_.jsx)("div",{className:"record-button-group",children:t.organizer_id!=k.user_id?Object(_.jsx)(E,{classes:"record-button",clickHandler:C,content:0!=t.ticket?"Refund":"Quit",disabled:!0}):Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(E,{classes:"record-button",clickHandler:S,content:"delete"}),Object(_.jsx)(E,{classes:"record-button",clickHandler:function(e){g(y)},content:"edit"})]})})]})]})});Event.propTypes={event:Ne.a.object.isRequired,onClick:Ne.a.func.isRequired};n(214);var tt=function(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=t[0],c=t[1],r=(R().token,Object(a.useContext)(P)),s=r.user;r.setUser;Object(a.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i();case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[s]);var i=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(M()+"joined_events/"+s.user_id,{headers:{"Content-Type":"application/json",Accept:"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(_.jsxs)("div",{className:"history--container",children:[Object(_.jsx)("h1",{className:"history--title",children:"Record"}),Object(_.jsx)("div",{className:"history--list",children:Object(_.jsxs)("ul",{children:[n.map((function(e,t){return Object(_.jsx)(et,{event:e,index:t},t)})),0===n.length&&Object(_.jsx)("h1",{className:"history--title",children:"No joined/organized event"})]})})]})},nt=(n(215),function(){return Object(a.useEffect)((function(){document.title="My Calendar"}),[]),Object(_.jsxs)(b.a,{className:"home",fluid:!0,children:[Object(_.jsx)(F,{}),Object(_.jsx)(B,{}),Object(_.jsxs)(m.a,{className:"main-content",children:[Object(_.jsx)(p.a,{xs:8,children:Object(_.jsx)(Xe,{})}),Object(_.jsx)(p.a,{xs:4,children:Object(_.jsx)(tt,{})})]}),Object(_.jsx)(Ue,{})]})}),at=(n(216),n(217),function(e){var t=e.event,n=void 0===t?{user_id:"",event_name:"",start_date:"",start_time:"",end_date:"",end_time:"",visible:0,repeat:0,venue:"",capacity:0,description:"",ticket:10,refund:1,refund_days:0,category:""}:t,c=(e.onClick,Object(a.useState)({toggle:!1,event:{}})),r=Object(d.a)(c,2),s=r[0],i=r[1];return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)("div",{className:"SR-card-container",onClick:function(){return i({toggle:!0,event:n})},children:[Object(_.jsxs)("div",{className:"SR-img-container",children:[Object(_.jsxs)("div",{className:"SR-fee",children:["$",n.ticket]}),Object(_.jsx)("img",{src:n.img_loc,alt:"event image"})]}),Object(_.jsx)("div",{className:"SR-title",children:n.name}),Object(_.jsxs)("div",{className:"SR-info-container",children:[Object(_.jsx)("div",{className:"SR-Organizer",children:n.username}),Object(_.jsxs)("div",{className:"SR-Date",children:["Date:\xa0",n.start_date]}),Object(_.jsxs)("div",{className:"SR-Time",children:["Time:\xa0",n.start_time]}),Object(_.jsxs)("div",{className:"SR-Venue",children:["Venue:\xa0",n.venue]})]})]}),Object(_.jsx)(_e,{showEvent:s,setShow:i})]})});Event.propTypes={event:Ne.a.object.isRequired,onClick:Ne.a.func.isRequired};var ct=function(){var e=Object(a.useState)(new Date),t=Object(d.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(new Date),s=Object(d.a)(r,2),i=s[0],u=s[1],h=Object(a.useState)({event_name:"",min:0,max:0,category:[]}),O=Object(d.a)(h,2),x=O[0],f=O[1],v=Object(j.f)(),g=Object(a.useState)([]),y=Object(d.a)(g,2),N=y[0],w=y[1];Object(a.useEffect)((function(){document.title="Search Page"}),[x,v,N]);var k=function(e){if("radio"===e.target.type)f(Object(le.a)(Object(le.a)({},x),{},{min:parseInt(e.target.value.split("-")[0]),max:parseInt(e.target.value.split("-")[1])}));else if("checkbox"===e.target.type){var t=x.category.slice();if(e.target.checked)t.push(e.target.value);else{var n=t.indexOf(e.target.value);n>-1&&t.splice(n,1)}f(Object(le.a)(Object(le.a)({},x),{},{category:t}))}else f(Object(le.a)(Object(le.a)({},x),{},Object(oe.a)({},e.target.name,e.target.value)))},S=function(){var e=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=new URLSearchParams).append("name",x.event_name),a.append("min",x.min),a.append("max",x.max),a.append("start_date",n.toJSON().split("T")[0]),a.append("end_date",i.toJSON().split("T")[0]),a.append("category",JSON.stringify(x.category)),fetch(M()+"filter_events/?"+a.toString(),{headers:{"content-type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){w(e)}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(_.jsxs)(b.a,{className:"home",fluid:!0,children:[Object(_.jsx)(F,{}),Object(_.jsx)(B,{}),Object(_.jsxs)(m.a,{className:"Search-box-container",children:[Object(_.jsx)("div",{className:"Search-bar-container",children:Object(_.jsxs)(p.a,{className:"Search-bar",children:[Object(_.jsx)("input",{type:"text",name:"event_name",placeholder:"Search Events...",onChange:k}),Object(_.jsx)("button",{className:"Search-button",onClick:S,children:Object(_.jsx)(U.a,{})})]})}),Object(_.jsxs)(m.a,{className:"Price-container",children:[Object(_.jsx)(p.a,{xs:1,className:"p-tag",children:"Price:\xa0"}),[{name:"Free",min:0,max:0},{name:"$1 - $50",min:1,max:50},{name:"$51 - $150",min:51,max:150},{name:"$151 - $500",min:151,max:500},{name:"$500+",min:501,max:1e3}].map((function(e,t){return Object(_.jsxs)(p.a,{xs:!0,children:[Object(_.jsx)("input",{type:"radio",className:"p-choice-1",name:"price",value:"".concat(e.min,"-").concat(e.max),onChange:k}),Object(_.jsxs)("label",{htmlFor:"p-choice-1",children:["\xa0",e.name]}),Object(_.jsx)("br",{})]},t)}))]}),Object(_.jsxs)(m.a,{className:"Date-container",children:[Object(_.jsxs)(p.a,{xs:6,className:"Datepicker-container",children:[Object(_.jsx)("div",{className:"d-tag",children:"Start Date:\xa0"}),Object(_.jsx)("div",{children:Object(_.jsx)(be,{onChangeHandler:function(e){return c(e)},startDate:n,placeholder:"Select Start Time",showTime:!1})})]}),Object(_.jsxs)(p.a,{xs:6,className:"Datepicker-container",children:[Object(_.jsx)("div",{className:"d-tag",children:"End Date:\xa0"}),Object(_.jsx)("div",{children:Object(_.jsx)(be,{onChangeHandler:function(e){return u(e)},startDate:i,placeholder:"Select Start Time",showTime:!1,minDate:n})})]})]}),Object(_.jsxs)(m.a,{className:"Category-container",children:[Object(_.jsx)(p.a,{xs:1,className:"c-tag",children:"Type:\xa0"}),["Academic","Sport","Music","Health","Festival","Career","Others"].map((function(e,t){return Object(_.jsxs)(p.a,{xs:!0,children:[Object(_.jsx)("input",{type:"checkbox",className:"c-choice-1",value:e,name:"category",onChange:k}),Object(_.jsxs)("label",{htmlFor:"c-choice-1",children:["\xa0",e]}),Object(_.jsx)("br",{})]},t)}))]})]}),Object(_.jsx)(m.a,{className:"Search-results",children:0===N.length?Object(_.jsx)("h1",{children:"No matching results"}):N.map((function(e,t){return Object(_.jsx)(p.a,{xs:6,md:4,children:Object(_.jsx)(at,{event:e},t)})}))}),Object(_.jsx)(Ue,{})]})},rt=(n(218),n(104)),st=function(e){var t=e.component,n=Object(rt.a)(e,["component"]),a=R().token;return Object(_.jsx)(j.b,Object(le.a)(Object(le.a)({},n),{},{render:function(e){return a?Object(_.jsx)(t,Object(le.a)({},e)):Object(_.jsx)(j.a,{to:"/login"})}}))},it=function(){var e,t=R().token,n=Object(a.useContext)(P),c=n.user,r=n.setUser,s=function(){var e=Object(l.a)(o.a.mark((function e(){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(M()+"user",{method:"GET",headers:{auth:t,"Content-Type":"application/json"}});case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,r(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),i=function(){var n=Object(l.a)(o.a.mark((function n(a){var c;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a.preventDefault(),c=new FormData,e){n.next=4;break}return n.abrupt("return");case 4:return c.append("pfp",e),n.next=7,fetch(M()+"updatepfp",{method:"POST",headers:{auth:t},body:c});case 7:return n.next=9,s();case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return Object(_.jsxs)("div",{children:[Object.entries(c).map((function(e){var t=Object(d.a)(e,2),n=t[0],a=t[1];return"img_loc"==n?Object(_.jsx)("img",{src:a,style:{width:"150px"}}):Object(_.jsxs)("p",{children:[n," : ",a]})})),Object(_.jsxs)("form",{children:[Object(_.jsx)("input",{type:"file",accept:"image/*",onChange:function(t){e=t.target.files[0]}}),Object(_.jsx)("button",{type:"submit",onClick:i,children:"submit"})]})]})},ot=function(){var e=Object(j.g)().search,t=new URLSearchParams(e),n=t.get("token"),c=t.get("user_id"),r=Object(a.useState)({errormsg:"",alert:!1}),s=Object(d.a)(r,2),i=s[0],u=s[1],b=Object(a.useState)(!0),m=Object(d.a)(b,2),p=m[0],h=m[1],O=Object(a.useState)(""),x=Object(d.a)(O,2),f=x[0],v=x[1],g=Object(a.useState)(""),y=Object(d.a)(g,2),N=y[0],w=y[1],k=function(e){e.preventDefault(),u({errormsg:"",alert:!1}),"pw"==e.target.name?(N!=e.target.value?h(!1):h(!0),v(e.target.value)):(f!=e.target.value?h(!1):h(!0),w(e.target.value))},S=function(){var e=Object(l.a)(o.a.mark((function e(t){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),f&&p){e.next=4;break}return u({errormsg:"No fields should be blank",alert:!0}),e.abrupt("return");case 4:return e.next=7,fetch(M()+"reset_password?token="+n+"&user_id="+c,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:f})});case 7:return a=e.sent,e.next=10,a.json();case 10:r=e.sent,a.ok?u({errorMsg:"You have successfully changed your password! You can try to login with new password",alert:!0}):u({errorMsg:r.error,alert:!0});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(_.jsx)("div",{children:n&&c&&Object(_.jsxs)("form",{children:[Object(_.jsx)("label",{for:"pw",children:Object(_.jsx)("b",{children:"Password"})}),Object(_.jsx)("br",{}),Object(_.jsx)("input",{type:"password",name:"pw",id:"pw",placeholder:"password",onChange:k}),Object(_.jsx)("br",{}),Object(_.jsx)("label",{for:"doublepw",children:Object(_.jsx)("b",{children:"Input password again"})}),Object(_.jsx)("br",{}),Object(_.jsx)("input",{type:"password",name:"doublepw",id:"doublepw",placeholder:"Password again",onChange:k}),Object(_.jsx)("br",{}),1==!p&&Object(_.jsx)("div",{style:{color:"red"},children:"Password does not match"}),Object(_.jsx)("button",{type:"submit",style:{marginTop:"15px"},onClick:S,children:"Submit"}),i.alert&&Object(_.jsx)("div",{style:{color:"red"},children:i.errorMsg})]})})};var lt=function(){var e=Object(a.useState)({type:0,user_id:0,username:"",email:"",img_loc:"",account_balance:""}),t=Object(d.a)(e,2),n=t[0],c=t[1],r=R(),s=r.token,i=(r.setToken,function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(M()+"user",{method:"GET",headers:{auth:s,"Content-Type":"application/json"}});case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,c(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}());return Object(a.useEffect)((function(){i()}),[]),Object(_.jsx)("div",{className:"App",children:Object(_.jsxs)(u.a,{children:[Object(_.jsxs)(P.Provider,{value:{user:n,setUser:c},children:[Object(_.jsx)(j.b,{path:"/login",exact:!0,component:Je}),Object(_.jsx)(st,{path:"/",exact:!0,component:ze}),Object(_.jsx)(st,{path:"/events",exact:!0,component:ke}),Object(_.jsx)(st,{path:"/myCalendar",exact:!0,component:nt}),Object(_.jsx)(st,{path:"/search",exact:!0,component:ct}),Object(_.jsx)(st,{path:"/user",exact:!0,component:it})]}),Object(_.jsx)(j.b,{path:"/reset_password",component:ot})]})})},dt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,260)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(_.jsx)(c.a.StrictMode,{children:Object(_.jsx)(lt,{})}),document.getElementById("root")),dt()}},[[219,1,2]]]);
//# sourceMappingURL=main.1f879060.chunk.js.map